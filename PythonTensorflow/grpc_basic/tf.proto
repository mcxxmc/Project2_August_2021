syntax="proto3";

service Communicator {
  // ask for new images to predict
  rpc RequestImages (TFStandard) returns (ImageArray) {}

  // exchange the prediction results
  rpc PostPredictions (PredictionArray) returns (TFStandard) {}

  // make prediction for an image immediately
  rpc ImmediatePred (Image) returns (Prediction) {}
}

message TFStandard {}

message Image {
  string name=1;
  string path=2;
}

message ImageArray {
  repeated Image Images=1;
}

message Prediction {
  string name=1;
  bool pred=2;  // true: vehicle; false: non-vehicle
}

message PredictionArray {
  repeated Prediction Predictions=1;
}

// cd to grpc_basic directory; run the code below to generate gRPC files:
// python -m grpc_tools.protoc -I./ --python_out=. --grpc_python_out=. ./tf.proto
